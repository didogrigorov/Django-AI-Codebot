{% extends 'base.html' %}

{% block content %}

{% if user.is_authenticated %}

{% if response %}
<pre>
<code class="language-{{lang}} line-numbers">
{{response}}

</code>
</pre>
<br />
<form method="POST" action="{% url 'home' %}">
    {% csrf_token %}
<div class="mb-3">
  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="code" placeholder="Paste the code to be fixed...">{{code}}</textarea>
</div>
    <select class="form-select" name="lang">
      <option selected>Select Programming Language</option>
        {% for lang in lang_list %}
      <option value="{{lang}}">{{lang}}</option>
        {% endfor %}
    </select>
    <br />
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% else %}
<pre>
<code class="language-python line-numbers">
print("Enter your code to show up here!")
</code>
</pre>
<br />
<form method="POST" action="{% url 'home' %}">
    {% csrf_token %}
<div class="mb-3">
  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="code" placeholder="Paste the code to be fixed..."></textarea>
</div>
    <select class="form-select" name="lang">
      <option selected>Select Programming Language</option>
        {% for lang in lang_list %}
      <option value="{{lang}}">{{lang}}</option>
        {% endfor %}
    </select>
    <br />
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% endif %}

{% else %}
<div class="col-md-6 offset-md-3">
    <h1>Login To The CodeAI Bot</h1>
    <hr>
    <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Enter Username" name="username">
            <br />
        </div>
        <div class="form-group">
            <input type="password" class="form-control" placeholder="Enter Your Password" name="password">
        </div>
        <br />
        <button type="submit" class="btn btn-primary">Login To The Bot</button>
    </form>
    <br />
    <div class="alert alert-primary" role="alert">
        If you don't have an account, please <a href="{% url 'register' %}">register</a> to use the bot!
    </div>
{% endif %}
{% endblock %}

